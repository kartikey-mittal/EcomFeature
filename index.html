<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js"></script>
  </head>
  <body class="flex-col justify-center items-center content-center">
    <div class="flex">
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">Chocolate</div>
          <p class="text-gray-700 text-base">Price: Rs.70</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            id="70"
            data-increment="70"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">Maggi</div>
          <p class="text-gray-700 text-base">Price: Rs.50</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            data-increment="50"
            id="50"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">Pen</div>
          <p class="text-gray-700 text-base">Price: Rs.30</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            data-increment="30"
            id="30"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
    </div>

    <div class="flex">
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">USB Cable</div>
          <p class="text-gray-700 text-base">Price: Rs.100</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            data-increment="100"
            id="100"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">Nachos</div>
          <p class="text-gray-700 text-base">Price: Rs.50</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            data-increment="50"
            id="50"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
      <div class="max-w-sm rounded overflow-hidden shadow-lg">
        <div class="px-6 py-2">
          <div class="font-bold text-xl">Puffin</div>
          <p class="text-gray-700 text-base">Price: Rs.40</p>
        </div>
        <div class="px-6 py-1 flex justify-end">
          <button
            data-increment="40"
            id="40"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded"
          >
            Buy Now
          </button>
        </div>
      </div>
    </div>

    <!-- -------------ITEMS CLOSED------------------ -->

    <div class="px-8 py-8 mt-8">
      <div>
        <div
          style="display: block"
          id="vstatus"
          class="overflow flex rounded-full bg-gray-200"
        >
          <div
            style="display: block"
            id="vstatus1"
            class="h-2 w-1/2 bg-gray-200"
          ></div>
          <div
            style="display: none"
            id="vstatus2"
            class="h-2 bg-blue-500"
          ></div>
        </div>

        <ol
          class="mt-4 grid gap-3 grid-cols-3 justify-items-center justify-space space-x-4 text-sm font-medium text-gray-500"
        >
          <li
            class="flex-col items-center justify-items-start text-blue-600 sm:gap-1.5"
          >
            <svg
              class="h-6 w-6 sm:h-5 sm:w-5"
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-cart-check"
              viewBox="0 0 16 16"
            >
              <path
                d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"
              />
              <path
                d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"
              />
            </svg>
            <span class="sm:inline text-xs"> Placed </span>
          </li>

          <li
            class="flex-col items-center justify-center text-blue-600 sm:gap-1.5"
          >
            <svg
              class="h-6 w-6 sm:h-5 sm:w-5"
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-shop"
              viewBox="0 0 16 16"
            >
              <path
                d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"
              />
            </svg>
            <span class="sm:inline"> Processing </span>
          </li>

          <li
            class="flex-col items-center align- justify-end text-blue-600 sm:gap-1.5"
          >
            <svg
              class="h-7 w-7 sm:h-6 sm:w-6"
              fill="currentColor"
              width="16"
              height="16"
              viewBox="0 0 30 30"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <path
                d="M15 5 A 1.0001 1.0001 0 1 0 15 7L17.359375 7L21.046875 14.990234C19.812861 15.90307 19 17.356539 19 19C19 21.749579 21.250421 24 24 24C26.749579 24 29 21.749579 29 19C29 16.250421 26.749579 14 24 14C23.606807 14 23.228985 14.057613 22.861328 14.144531L20.947266 10L22 10L22 7L20.5 7C20.195746 7 19.914259 7.0921754 19.677734 7.2480469L19.175781 6.1621094C18.850003 5.4545914 18.137409 5 17.359375 5L15 5 z M 5.5 10C4.8481216 10 4.2984868 10.41875 4.0917969 11L2 11 A 1.0001 1.0001 0 1 0 2 13L5 13L5.6738281 13L5.3828125 14.023438C5.2556006 14.01353 5.1298367 14 5 14C2.243 14 0 16.243 0 19C0 21.757 2.243 24 5 24C7.4143633 24 9.433596 22.279096 9.8984375 20L13.947266 20L14 20 A 1.0007574 1.0007574 0 0 0 14.046875 20L15 20L15.359375 20C16.312375 20 17.133313 19.327578 17.320312 18.392578L18 15L12.867188 15L11.724609 13L13 13L19 13L18.46875 11.792969C17.98975 10.703969 16.912656 10 15.722656 10L12 10C11.372438 10 10.819739 10.29422 10.453125 10.746094L5.7460938 10.019531L5.7402344 10.025391C5.6612344 10.012391 5.583 10 5.5 10 z M 7.7539062 13L9.4179688 13L12.275391 18L6.3261719 18L6.8964844 16L8.9746094 16C8.5295279 15.411595 7.9574472 14.923894 7.3027344 14.576172L7.7539062 13 z M 24 16C25.668699 16 27 17.331301 27 19C27 20.668699 25.668699 22 24 22C22.331301 22 21 20.668699 21 19C21 18.15103 21.34795 17.393032 21.90625 16.849609L23.091797 19.419922 A 1.0005834 1.0005834 0 0 0 24.908203 18.580078L23.730469 16.027344C23.820795 16.019319 23.907427 16 24 16 z M 4.8125 16.019531L4.0820312 18.576172 A 1.0001 1.0001 0 0 0 4.0097656 19.212891 A 1.0001 1.0001 0 0 0 5.2304688 20L7.8164062 20C7.4021391 21.161251 6.3016094 22 5 22C3.346 22 2 20.654 2 19C2 17.410258 3.2472651 16.118546 4.8125 16.019531 z"
              ></path>
            </svg>
            <span class="sm:inline"> On the way </span>
          </li>
        </ol>
      </div>
    </div>

    <!-- -----------TEXTS----------- -->

    <div>
      <p
        id="visibleprocess"
        class="text-2xl mt-16 justify-center text-center text-red-600 font-bold"
        style="display: none"
      >
        Processing...
      </p>

      <p
        id="visibilityP"
        class="text-4xl justify-center text-center text-green-600 font-bold"
        style="display: none"
      >
        Wohoo!! <br />
        ORDER Confirmed
      </p>

      <div class="flex justify-end">
        <button id="reset" class="left-0 w-full text-center mb-50px">
          Reset
        </button>
      </div>
      <p id="output" class="fixed bottom-0 left-0 w-full text-center">
        Firebase Value: Loading...
      </p>
    </div>
    <!-- ------------------- MY SCRIPT-------------- -->

    <!-- <script>
      // Add a single click event listener to the document
      document.addEventListener("click", (event) => {
        if (event.target && event.target.tagName === "BUTTON") {
          const buttonId = event.target.id;
          console.log(`${buttonId} was clicked`);
          alert(`${buttonId} was clicked`);
        }
      });
    </script> -->

    <!-- ---------------------------END OF MY SCRIPT------------ -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
      //   import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
      //   const app = initializeApp(firebaseConfig);
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyDMsKXvxIcJsJPe_6Hp1HFNTVDfdIxHOBs",
        authDomain: "zoop-1d780.firebaseapp.com",
        databaseURL: "https://zoop-1d780-default-rtdb.firebaseio.com",
        projectId: "zoop-1d780",
        storageBucket: "zoop-1d780.appspot.com",
        messagingSenderId: "345876708733",
        appId: "1:345876708733:web:77c0704a8e778ff7d8e014",
      };

      firebase.initializeApp(firebaseConfig);

      const database = firebase.database();
      //   const updateButton = document.getElementById("updateButton");
      const updateButton = document.getElementById("reset");
      const outputElement = document.getElementById("output");

      // Function to increment Firebase value
      function incrementFirebaseValue(incrementBy) {
        const your_data_path = "ORDER/minimum";
        database.ref(your_data_path).transaction(
          (currentValue) => {
            // Check if currentValue exists, initialize to 0 if not
            if (typeof currentValue !== "number") {
              currentValue = 0;
            }
            // Increment the value by the specified amount
            const final = currentValue + incrementBy;
            return final;
          },
          (error, committed, snapshot) => {
            if (error) {
              console.error("Transaction failed abnormally!", error);
            } else if (!committed) {
              console.log(
                "Transaction was not committed, possibly due to security rules."
              );
            } else {
              const updatedValue = snapshot.val();
              // Display the updated value on the website
              outputElement.innerHTML = `Firebase Value: ${updatedValue}`;
            }
          }
        );
      }

      // Function to listen for changes in Firebase value
      function listenForChanges() {
        const your_data_path = "ORDER/minimum";
        database.ref(your_data_path).on("value", (snapshot) => {
          const updatedValue = snapshot.val();
          // Display the updated value on the website
          outputElement.innerHTML = `Firebase Value: ${updatedValue}`;
          const vs = document.getElementById("vstatus");
          if (updatedValue > 100) {
            vs.classList.add("bg-green-500");
          } else {
            vs.classList.add("bg-gray-200");
          }
          const pTag = document.getElementById("visibilityP");
          pTag.style.display = updatedValue > 100 ? "block" : "none";
        });
      }

      // Listen for button click
      //   ----------------------update button---------------------
      //   updateButton.addEventListener("click", () => {
      //     console.log("clicked button");
      //     const incrementAmount = 40; // You can change this to any value you want to increment by
      //     incrementFirebaseValue(incrementAmount);
      //   });

      const buttons = document.querySelectorAll("button[data-increment]");
      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          const incrementAmount = parseInt(
            button.getAttribute("data-increment"),
            10
          );
          incrementFirebaseValue(incrementAmount);
          const psTag = document.getElementById("visibleprocess");
          psTag.style.display = "block";
          const vs1 = document.getElementById("vstatus1");
          vs1.style.display = "block";
          vs1.classList.add("bg-green-500");
        });
      });
      function updateFirebaseValue(value) {
        database.ref("ORDER/minimum").set(value);
      }

      // Start listening for changes in Firebase value
      listenForChanges();

      updateButton.addEventListener("click", () => {
        const newValue = "0"; // You can replace this with any value you want
        updateFirebaseValue(newValue);
        console.log("clicked button");
      });
    </script>
  </body>
</html>
